ioctlについて

readやwriteなどは、ユーザープロセスとデバイスとの間でやり取りをすることができる
しかし、これだけではできないこともある

ioctlは、システムコールの一種

ユーザープロセスはioctlを呼び出すことでドライバに対してシステムコールを発行できる

ioctlは、readやwriteなどのデータを書き込んだり、読み込むこと以外のことを行ってくれるシステムコールである。

具体例としては、ハードのレジスタを制御する。また、ドライバの動作自体を変えるなどである。

ioctl()は、自分で中身を決めることができる

ioctlはユーザープロセスで、IOCTLはシステムコールインターフェイス

ioctlはユーザープロセスが呼び出すため、ドライバのIOCTLメソッドはユーザーコンテキストである。

IOCTLはint型の変数なので、数値の意味を事前に決めておく。

IOCTLコマンドのフォーマットはマクロで定義されている

マクロは以下の4つ

_IO()
_IOR()
_IOW()
_IOWR()

これらを用いて、ioctlの動きを決める。

